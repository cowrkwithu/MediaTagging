# 요구사항 분석서

**프로젝트명:** MediaTagging
**버전:** v20260127
**작성일:** 2026-01-27

---

## 1. 개요

본 문서는 동영상 및 사진 AI 태깅 및 검색 웹 애플리케이션의 사용자 요구사항을 정의한다.

---

## 2. 시스템 요구사항

### 2.1 플랫폼 요구사항

| 항목 | 요구사항 |
|------|----------|
| 서비스 형태 | 웹 애플리케이션 |
| 접근 방식 | 웹 브라우저를 통한 접근 |

---

## 3. 기능 요구사항

### 3.1 미디어 업로드 및 메타데이터 생성

#### FR-001: 동영상 업로드
- 사용자는 동영상 파일을 시스템에 업로드할 수 있어야 한다.
- 지원 형식: MP4, MOV, AVI, MKV, WebM, WMV, FLV

#### FR-001-1: 사진 업로드
- 사용자는 사진 파일을 시스템에 업로드할 수 있어야 한다.
- 지원 형식: JPG, JPEG, PNG, GIF, WebP, BMP, TIFF

#### FR-002: 동영상 자동 메타데이터 생성
- 시스템은 업로드된 동영상에 대해 다음 정보를 자동 생성해야 한다:
  - 동영상 파일명
  - 동영상 전체에 대한 AI 요약 (2-3문장)
  - 동영상에 대한 AI 태그 (3-10개)

#### FR-002-1: 사진 자동 메타데이터 생성
- 시스템은 업로드된 사진에 대해 다음 정보를 자동 생성해야 한다:
  - 사진 파일명
  - 사진에 대한 AI 설명 (2-3문장)
  - 사진에 대한 AI 태그 (5-15개)
  - 썸네일 이미지

#### FR-003: 사용자 입력 메타데이터
- 사용자는 다음 정보를 직접 입력할 수 있어야 한다:
  - 동영상/사진 제목
  - 동영상/사진에 대한 기록(메모)
  - 사용자 정의 태그 (#태그 형식)

---

### 3.2 영상 태깅 작업

#### FR-004: 장면 단위 분할
- 사용자가 저장 후 영상 태깅 작업을 시작하면, 시스템은 영상을 장면 단위로 분할해야 한다.

#### FR-005: 장면별 타임스탬프 생성
- 각 장면에 대해 시작/종료 타임스탬프를 생성해야 한다.

#### FR-006: 장면별 태그 생성
- 각 장면에 대해 3개 이상 7개 이하의 AI 태그를 생성해야 한다.
- 2개 이상의 장면에서 등장하는 태그는 동영상 수준 태그로 집계된다.

#### FR-006-A: 장면별 사용자 메모 및 태그
- 사용자는 각 장면에 대해 메모(user_notes)를 입력할 수 있어야 한다.
- 메모에 #태그 형식으로 사용자 정의 태그를 추가할 수 있어야 한다.

---

### 3.3 사진 태깅 작업

#### FR-006-1: 사진 AI 분석
- 사용자가 태깅 작업을 시작하면, 시스템은 AI 비전 모델을 사용하여 사진을 분석해야 한다.

#### FR-006-2: 사진 설명 생성
- 사진의 내용을 설명하는 2-3문장의 한국어 설명을 생성해야 한다.

#### FR-006-3: 사진 태그 생성
- 사진에 대해 5개 이상 15개 이하의 AI 태그를 생성해야 한다.

---

### 3.3-1 태그 관리

#### FR-006-4: 태그 삭제
- 사용자는 동영상, 사진, 장면의 태그를 개별적으로 삭제할 수 있어야 한다.
- AI 생성 태그와 사용자 정의 태그 모두 삭제 가능해야 한다.

---

### 3.4 장면 단위 영상 저장

#### FR-007: 장면 선택
- 사용자는 장면 단위로 나뉘어진 영상들 중 원하는 장면을 선택할 수 있어야 한다.

#### FR-008: 개별 영상 저장
- 선택한 장면을 별도의 영상 파일로 저장할 수 있어야 한다.

#### FR-008-1: 장면 병합 내보내기
- 여러 장면을 선택하여 하나의 영상으로 병합하여 내보낼 수 있어야 한다.

---

### 3.5 키워드 검색

#### FR-009: 키워드 검색
- 사용자는 키워드를 이용하여 동영상, 사진, 장면을 검색할 수 있어야 한다.

#### FR-010: 논리 연산자 지원
- 검색 시 다음 논리 연산자를 지원해야 한다:
  - AND (그리고): 모든 키워드를 포함하는 결과
  - OR (또는): 키워드 중 하나 이상을 포함하는 결과
  - NOT (제외): 특정 키워드를 제외한 결과

#### FR-011: 검색 대상
- 검색은 다음을 대상으로 수행되어야 한다:
  - 동영상 전체 태그
  - 장면별 태그
  - 사진 태그
  - 동영상/사진 제목
  - 동영상 요약 / 사진 설명

#### FR-011-1: 검색 결과 네비게이션
- 검색 결과에서 장면을 클릭하면 해당 동영상 상세 페이지로 이동하고, 해당 장면이 자동 선택되어야 한다.
- 상세 페이지에서 뒤로가기 시 검색 결과가 유지되어야 한다.

#### FR-011-2: 검색 상태 유지
- 검색 조건(AND/OR/NOT 태그)이 URL 파라미터로 유지되어야 한다.
- 브라우저 뒤로가기 시 이전 검색 결과가 자동으로 복원되어야 한다.

---

### 3.6 동영상 제작 요청

#### FR-012: 영상 선택
- 사용자는 검색 결과에서 다음을 선택할 수 있어야 한다:
  - 장면 단위로 나뉘어진 영상
  - 원본 영상

#### FR-013: 외부 API 연동
- 선택한 영상을 Google Nanobana API를 이용하여 동영상 제작을 요청할 수 있어야 한다.

---

## 4. 사용자 워크플로우

### 4.1 동영상 워크플로우

```
1. 동영상 업로드
       │
       ▼
2. 자동 메타데이터 생성 (파일명, duration, file_size)
       │
       ▼
3. 사용자 메타데이터 입력 (제목, 기록, #태그) [선택사항]
       │
       ▼
4. 저장
       │
       ▼
5. 영상 태깅 작업 시작
       │
       ▼
6. AI 요약 생성 (멀티프레임 비전 분석)
       │
       ▼
7. 장면 단위 분할 + 타임스탬프 + 썸네일 생성
       │
       ▼
8. 장면별 AI 태그 생성 (3개 프레임 분석)
       │
       ▼
9. 장면 태그 집계 (동영상 수준 태그)
       │
       ▼
10. 키워드 검색 (논리 연산자 활용)
       │
       ▼
11. 검색 결과에서 영상/장면 선택
       │
       ▼
12. 장면 다운로드 또는 병합 내보내기
```

### 4.2 사진 워크플로우

```
1. 사진 업로드
       │
       ▼
2. 자동 메타데이터 생성 (파일명, 크기, 해상도, 썸네일)
       │
       ▼
3. 사용자 메타데이터 입력 (제목, 기록, #태그) [선택사항]
       │
       ▼
4. 저장
       │
       ▼
5. 사진 태깅 작업 시작
       │
       ▼
6. AI 설명 생성 (비전 분석)
       │
       ▼
7. AI 태그 생성 (5-15개)
       │
       ▼
8. 키워드 검색 (논리 연산자 활용)
       │
       ▼
9. 검색 결과에서 사진 선택
       │
       ▼
10. 사진 다운로드
```

---

## 5. 비기능 요구사항

### NFR-001: 웹 접근성
- 주요 웹 브라우저(Chrome, Firefox, Safari, Edge)에서 정상 동작해야 한다.

### NFR-002: 사용자 인터페이스
- 직관적이고 사용하기 쉬운 인터페이스를 제공해야 한다.
- 반응형 디자인을 지원해야 한다 (Desktop, Tablet, Mobile).

### NFR-003: 응답 시간
- 미디어 업로드 및 처리 상태를 사용자에게 실시간으로 표시해야 한다.
- 처리 중 상태는 2초마다 자동 갱신되어야 한다.

### NFR-004: 태그 구분
- AI 생성 태그와 사용자 정의 태그를 시각적으로 구분해야 한다.
  - AI 태그: 파란색 배지
  - 사용자 태그: 보라색 배지 (confidence = 1.0)

---

## 6. 용어 정의

| 용어 | 정의 |
|------|------|
| 미디어(Media) | 동영상 또는 사진 파일 |
| 장면(Scene) | 동영상 내에서 의미적으로 구분되는 단위 영상 구간 |
| 태그(Tag) | 영상, 장면, 사진의 내용을 설명하는 키워드 |
| 타임스탬프(Timestamp) | 장면의 시작 및 종료 시점을 나타내는 시간 정보 |
| 메타데이터(Metadata) | 미디어에 대한 부가 정보 (제목, 요약, 태그 등) |
| 썸네일(Thumbnail) | 미디어의 대표 이미지 |

---

## 7. 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| v20260126151546 | 2026-01-26 | - | 최초 작성 |
| v20260127 | 2026-01-27 | - | 사진 태깅 기능 추가, 프로젝트명 변경 (editVideoTagging → MediaTagging) |
| v20260127-2 | 2026-01-27 | - | 장면별 사용자 메모/태그 추가 (FR-006-A), 태그 삭제 기능 추가 (FR-006-4), 검색 결과 네비게이션 및 상태 유지 추가 (FR-011-1, FR-011-2) |
